import ast


def test_deduplicate_image_urls():
    lens = ast.literal_eval("""
{'relatedTopics': [{'keyword': 'Table tennis', 'pageUrl': 'https://www.google.com/search?q=Table+tennis&kgmid=/m/07jbh&hl=en-US&gl=US', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSN0MLE14r7TRl4T-DhzkMGDd-oZp51lBWj4e6WHParg5amZPCp'}, {'keyword': 'World Table Tennis Championships', 'pageUrl': 'https://www.google.com/search?q=World+Table+Tennis+Championships&kgmid=/m/02z5t0d&hl=en-US&gl=US', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSN0MLE14r7TRl4T-DhzkMGDd-oZp51lBWj4e6WHParg5amZPCp'}], 'matches': [{'domain': 'shutterstock', 'items': [{'title': 'Miu Hirano Table Tennis Tleague Nojima Editorial Stock Photo - Stock Image | Shutterstock Editorial from Shutterstock', 'pageUrl': 'https://www.shutterstock.com/editorial/image-editorial/miu-hirano---table-tennis--t-13974775v', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTlmO17zVfYqHlAEuWhEmwjQ9S6F9rgxoGRExFZEBc_F9u9ShNU', 'source': 'Shutterstock'}]}, {'domain': 'youtube', 'items': [{'title': '- YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/hashtag/%E9%A6%AC%E9%BE%8D/shorts', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQ-_-LqpBJmydWNWZMC4qrZ9ITG7Bs2eeArCZY069CHvqOU49d', 'source': 'YouTube'}, {'title': '2017 Thailand Junior & Cadet Open Highlights: Fumiya Igarashi vs Li Hsing-Yang (1/2) - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/watch?v=Ce28BP64Bvs', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS79sW81bE_I52RVJRKE0gEUY-RBkafhYSN-cjvIGmPBpT2VhDY', 'source': 'YouTube'}, {'title': 'This rally is just amazing #pingpong #tabletennis - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/watch?v=4b-sFBBMtww', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTw8d2f_ghEZ-61SkUr4n-ZMyUz0-D7cKJG3KrpOnMMypDy9kE-', 'source': 'YouTube'}, {'title': '888 TTC - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/channel/UC2n9xd7DeXzxLnYIobVX3Zw', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQ0rt30XPsRAJiTGXv9UADOFrbxflWhxLEn_Yb7DRrGD3LAUdDm', 'source': 'YouTube'}, {'title': 'Dimitrij Ovtcharov vs Dmitrii Vinogradov | 2021 Russian Premier League - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/watch?v=A0YUXbCw89o', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRuPNILsU80dtMXlkgBakv7vIKBOJcWOv5tF7D6Z193PLAo7zx7', 'source': 'YouTube'}, {'title': 'Table Tennis World Champion Recommend FastPong - YouTube from YouTube', 'pageUrl': 'https://m.youtube.com/shorts/De96mzGEwZ4', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRmMNKje5ZLhiOKZrfBRqytwPHeOfBCgAd2RjyDXB_ZpwJKpaa_', 'source': 'YouTube'}, {'title': 'Stol tennisi - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/watch?v=-epu8bycy6s', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTmirGmlKj8MztBvmv5P-sjaGjb8JJqkgFwpAhR_9OHUSHWMrs4', 'source': 'YouTube'}, {'title': 'Ruichao Chen (2703) vs Jian Li (2666) - 2017 Arnold Challenge ( 1/4) - YouTube from YouTube', 'pageUrl': 'https://www.youtube.com/watch?v=d66-v4EQaA8', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTqgBmbnhJ2C-V2pdsTlNAbMvrTeyY45eiPFF7zveOWe8Gsd5WY', 'source': 'YouTube'}]}, {'domain': 'instagram', 'items': [{'title': "World Table Tennis | THE CONDUCTOR üéºJang Woojin literally gave it his all against Wang Chuqin in the #ITTFWorlds2024 Men's Teams Semifinal ü•π | Instagram from Instagram", 'pageUrl': 'https://www.instagram.com/wtt/reel/C3v3YnxRcE_/', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSLTToeRiq8y--r4v5DPQmyH_2Llo4riC4q4bTTVFCY6ioOyexP', 'source': 'Instagram'}, {'title': 'USA Table Tennis | Second win for the US Men‚Äôs Team!!! Team USA defeats Saudi Arabia 3-0 at the ITTF World Team Table Tennis Championships in Busan 2024!... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/usatabletennis_/p/C3hIR3ZhSQD/', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSDxhemyb5VySjt1kG43UBN1aGp4WMC6vt_viKIUg_N8WjseLis', 'source': 'Instagram'}, {'title': 'USA Table Tennis | Intense practice sessions are underway as our players gear up for the ITTF World Team Table Tennis Championships in Busan 2024, kicking o... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/usatabletennis_/p/C3WmKxQyEs0/', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRkRylGyZvn8v9bOwjx1S3MWRTKvwo3TnDlOyEbq1hnsB9cFh1M', 'source': 'Instagram'}, {'title': 'SPORT PLUS MEDIA | üèì Singapore‚Äôs Men‚Äôs and Women‚Äôs Table Tennis teams have both qualified for the knock-out stages of the ITTF World Team Table Ten... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/sportplus.sg/p/C3j71BWOLq7/', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRlbEKEnQJtqaz-IDGTPLIQk5ht8d6fBkgyaviKwZj5NMKCgW5O', 'source': 'Instagram'}, {'title': 'Table tennis is life Ô∏èüèì | What do you think of this ?üòò - üì∏ Source: reggienader_ on TikTok (Dm for credit or removal / All rights¬Æ are reserved & belong to t... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/_ttislife_/reel/C6ncptYrtD5/', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSNitfvMcQkqmWWgMvmxfzx2ZLQNbxRPimqxNZysrgWV8l9Sn-W', 'source': 'Instagram'}, {'title': 'TimoBoll Fans üèìüá©üá™ | üèìTable Tennis Champions League Season 2022/23 Group Stage 1st Match Borussia D√ºsseldorf ‚Äì HB Ostrov 3:1üí™üèªüí™üèª \u2028Anton K... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/timobollshare/p/Ckt3WBHjE6p/?next=%2Fyagizatcioglu2009%2Ffeed%2F&hl=de', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTdmnx_pPeDIfBmtrnyodfijVmBfyNjy3EvW7vqiYD7OMmnCKos', 'source': 'Instagram'}, {'title': 'USA Table Tennis | First match done for the Men‚Äôs Team at the ITTF World Team Table Tennis Championships Busan 2024 against Germany with a result of 3-0 i... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/usatabletennis_/p/C3aDzfehwwg/', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTHJlqbO938THJURBTuW5k1mWdnvPgg2LvaVju79jOMi2hQotXa', 'source': 'Instagram'}, {'title': 'Major League Table Tennis on Instagram: "THE @revolutionmltt IS HERE and it‚Äôs amazing.üéá #FireAway üéüÔ∏è Join us in a city near you! (Link in bio)" from Instagram', 'pageUrl': 'https://www.instagram.com/majorleaguetabletennis/p/CzkIV2kuk65/', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTZ9K56jKQkXql5dTK3_PqgJauSE_I-gRYykXoHArVmupOPVYoo', 'source': 'Instagram'}, {'title': 'Singapore üá∏üá¨ Table Tennis Assn | The 32nd SEA GAMES 9-16 MAY 2023 Phnom Penh, Cambodia Day 2 Men‚Äôs Team Group B Singapore VS Philippines 3-0 Koen Pang VS Edouard... | Instagram from Instagram', 'pageUrl': 'https://www.instagram.com/p/CsDg3kFhqFP/', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRYTJBYFpKBaLRWaLCy6uX4WjeNrr0ePuW0S7bLzQdt01Dq96OS', 'source': 'Instagram'}, {'title': 'Lev Katsman (@leokatsman) ‚Ä¢ Instagram photos and videos from Instagram', 'pageUrl': 'https://www.instagram.com/leokatsman/', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQFLDKytdV3QZ3_PKM-XBXdLF5i7T6ztbo1zrdju7xqSDb-nZVo', 'source': 'Instagram'}, {'title': 'Best Table Tennis üèì (@best_tabletennis) ‚Ä¢ Instagram photos and videos from Instagram', 'pageUrl': 'https://www.instagram.com/best_tabletennis/', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQEurmHB5y1cVQ9srzFARXMD0nbHk0Oux254ph61nQnuzKq819p', 'source': 'Instagram'}]}], 'omissions': [{'title': 'In pics: singles semifinals at 2021 World Table Tennis Championships Finals - Xinhua from Êñ∞ÂçéÁΩë', 'pageUrl': 'http://www.news.cn/english/2021-11/29/c_1310340667.htm', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRdo5-0LY9zPp298buHK1-I9jwtnSPhSfMgnNQ22V1TxBzu2AjK', 'source': 'Êñ∞ÂçéÁΩë'}, {'title': 'Mohamed EL-BEIALI equipment - PingSunday from PingSunday', 'pageUrl': 'https://pingsunday.com/mohamed-el-beiali-equipment/', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQm1Kwf-_xp_8aH1VvNl0FbG4mfmtV9tuchoPzqOJQ8CMkpx1Pe', 'source': 'PingSunday'}, {'title': 'USA Table Tennis on X: "Second win for the US Men‚Äôs Team!!! Team USA defeats Saudi Arabia 3-0 at the ITTF World Team Table Tennis Championships in Busan 2024! https://t.co/kcUjscy09v" / X from X', 'pageUrl': 'https://twitter.com/usatabletennis/status/1759459565287170512', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRDFgh9RJujhhwECtDSuGIZovEeUpilLrgelKXlqPggwJhetdZc', 'source': 'X'}, {'title': '2018 Summer Youth Olympic Games: highlights of singles table tennis match - Xinhua | English.news.cn from Êñ∞ÂçéÁΩë', 'pageUrl': 'http://www.xinhuanet.com/english/2018-10/11/c_137525383_26.htm', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqKenWHT7hDvlYTzKSzIU9DyCkylZr7qMpVi-idHAh4n-6ID95', 'source': 'Êñ∞ÂçéÁΩë'}, {'title': "File:Mondial Ping - Men's Singles - Round 4 - Kenta Matsudaira-Vladimir Samsonov - 48.jpg - Wikimedia Commons from Wikimedia", 'pageUrl': 'https://commons.wikimedia.org/wiki/File:Mondial_Ping_-_Men%27s_Singles_-_Round_4_-_Kenta_Matsudaira-Vladimir_Samsonov_-_48.jpg', 'imageUrl': 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTqM4B151tgGyLi9fPGQ4DHZ8soyXzi07-ruKP57QJKE0-loxGE', 'source': 'Wikimedia'}, {'title': "File:Table tennis at the 2018 Summer Youth Olympics ‚Äì Men's Singles Gold Medal Match 059.jpg - Wikimedia Commons from Wikimedia", 'pageUrl': 'https://commons.wikimedia.org/wiki/File:Table_tennis_at_the_2018_Summer_Youth_Olympics_%E2%80%93_Men%27s_Singles_Gold_Medal_Match_059.jpg', 'imageUrl': 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRWZtoaqI3DoiDSU7kgLysU1mHVSan4-DiRDhe_CkZoybfL31Hb', 'source': 'Wikimedia'}, {'title': 'World Table Tennis on X: "Horacio Cifuentes & An Jaehyun were cooking with this point at #WTTMendoza ü§Ø #WTTContender Mendoza is LIVE üëâ https://t.co/obRmtF5f8o #TableTennis #PingPong https://t.co/SniLhxy401" / X from X', 'pageUrl': 'https://twitter.com/WTTGlobal/status/1796326763964060108', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3T3lziZ_JroOLQ11w2dgEYnlFu9azNWu8MBReGT2BCzaJ5UdA', 'source': 'X'}, {'title': "File:Table tennis at the 2018 Summer Youth Olympics ‚Äì Men's Singles Gold Medal Match 131.jpg - Wikimedia Commons from Wikimedia", 'pageUrl': 'https://commons.wikimedia.org/wiki/File:Table_tennis_at_the_2018_Summer_Youth_Olympics_%E2%80%93_Men%27s_Singles_Gold_Medal_Match_131.jpg', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS5aNdzXPiIe1rJD17hMAFuw7VufkHBwcT-bVrEjGQOMFvfgqgd', 'source': 'Wikimedia'}, {'title': 'WANG Chuqin CHN_2018YOG_PRG_9120 | Singles, Gold Medal Match‚Ä¶ | Flickr from Flickr', 'pageUrl': 'https://www.flickr.com/photos/ittfworld/43432116170', 'imageUrl': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuAWorxRk7krIiYtaODw3cJp_e5x892X-7KJMeGlNcMvBnN433', 'source': 'Flickr'}, {'title': 'Major League Table Tennis hosts first-ever Washington competition in Everett from KOMO', 'pageUrl': 'https://komonews.com/news/local/major-league-table-tennis-competition-this-weekend-angel-of-the-winds-arena-everett-seattle-spinners-bay-area-blasters-olympics-atheletes-sports-sport-tennis-plyers', 'imageUrl': 'https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQ8aRdI8WeIUfC50Z_H3P7f_G7_yDEamxPsZ5X--mtvb9248101', 'source': 'KOMO'}]}
""")
    custom_search = ast.literal_eval("""
{'matches': [], 'omissions': []}
""")

    original_lens_yt_matches_count, original_lens_ig_matches_count = count_youtube_instagram_items(lens)

    assert original_lens_yt_matches_count > 0
    assert original_lens_ig_matches_count > 0


def count_youtube_instagram_items(src_dict):
    youtube_matches_len = 0
    instagram_matches_len = 0
    for match in src_dict['matches']:
        domain = match['domain'].lower()
        if domain == 'youtube':
            youtube_matches_len = len(match['items'])
        elif domain == 'instagram':
            instagram_matches_len = len(match['items'])

    return youtube_matches_len, instagram_matches_len
